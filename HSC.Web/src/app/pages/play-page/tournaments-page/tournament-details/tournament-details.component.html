<ng-container *ngIf="details$ | async as data">
  <div class="main-container d-flex flex-column h-100">
    <div class="d-flex flex-row justify-between align-center">
      <h2>{{ data.title }}</h2>
      <button class="big-button" *ngIf="!data.hasJoined" mat-raised-button (click)="joinTournament()">
        {{ 'Tournaments.Join' | translate }}
      </button>
      <button
        class="big-button"
        *ngIf="data.hasJoined"
        mat-raised-button
        (click)="findMatch()"
        [disabled]="data.tournamentStatus !== TournamentStatus.Ongoing"
      >
        {{ 'Tournaments.FindMatch' | translate }}
      </button>
    </div>
    <div class="d-flex flex-row">
      <div class="w-50 pr-2">
        <label class="white-space-pre">{{ data.description }}</label>
      </div>
      <div class="w-50 d-flex flex-column pb-3">
        <div class="d-flex flex-row">
          <div class="w-50 d-flex flex-row" *ngIf="data.tournamentStatus === TournamentStatus.NotStarted">
            <label>{{ 'Tournaments.StartsIn' | translate }}</label>
            <countdown [config]="{ leftTime: data.startsInEndsAt }"></countdown>
          </div>
          <div class="w-50 d-flex flex-row" *ngIf="data.tournamentStatus === TournamentStatus.Ongoing">
            <label>{{ 'Tournaments.EndsIn' | translate }}</label>
            <countdown [config]="{ leftTime: data.startsInEndsAt }"></countdown>
          </div>
          <div class="w-50 d-flex flex-row" *ngIf="data.tournamentStatus === TournamentStatus.Finished">
            <label>{{ 'Tournaments.Winner' | translate }}</label>
            <label>{{ data.winnerUserName }}</label>
          </div>
          <div class="w-50 d-flex flex-row">
            <label class="pl-1">{{ ('Tournaments.BuyIn' | translate) + ': ' }}</label>
            <label>{{ data.buyIn }}</label>
          </div>
        </div>
        <div class="d-flex flex-row">
          <div class="w-50 d-flex flex-row">
            <label class="pl-1">{{ ('Tournaments.Length' | translate) + ': ' }}</label>
            <label>{{ data.length }}</label>
          </div>
          <div class="w-50 d-flex flex-row">
            <label class="pl-1">{{ ('Tournaments.PrizePool' | translate) + ': ' }}</label>
            <label>{{ data.prizePool }}</label>
          </div>
        </div>
        <div>
          <label>{{ 'Tournaments.TimeControl' | translate }}</label>
          <label>{{ data.gameTimeMinutes + '+' + data.gameIncrement }}</label>
        </div>
      </div>
    </div>
    <div class="d-flex flex-row">
      <div class="d-flex flex-column chat-area mat-elevation-z3 w-50">
        <div class="messages d-flex">
          <div *ngFor="let msg of messages">
            <label class="message">{{ msg.message }}</label>
          </div>
        </div>
        <div class="d-flex flex-row align-center">
          <mat-form-field class="send-message-input" appearance="standard">
            <input
              (keyup.enter)="sendMessage()"
              matInput
              type="text"
              [(ngModel)]="writtenMessage"
              [placeholder]="'Friends.SendMessagePlaceholder' | translate"
            />
          </mat-form-field>

          <button mat-icon-button (click)="sendMessage()">
            <mat-icon>send</mat-icon>
          </button>
        </div>
      </div>
      <div class="w-50 d-flex flex-column">
        <mat-list>
          <mat-list-item
            class="list-item"
            *ngFor="let player of standings; let even = even; let odd = odd; let i = index"
          >
            <div
              class="d-flex flex-row justify-between align-center list-row"
              [ngClass]="{ 'odd-row': odd, 'even-row': even }"
            >
              <label>{{ '#' + i }}</label>
              <label class="pl-2">{{ player.userName }}</label>
              <label>{{ player.points }}</label>
            </div>
          </mat-list-item>
        </mat-list>
      </div>
    </div>
  </div>
</ng-container>
